{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"kslwqCIsh6ew+I1KeA1rlVRjsAk=","exportNames":["*"]}},{"name":"@babel/runtime/helpers/objectSpread2","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":65,"index":65}}],"key":"SfRhzMj3Ex6qA89WTFEUm9Lj49A=","exportNames":["*"]}},{"name":"fbjs/lib/invariant","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":12,"column":0,"index":301},"end":{"line":12,"column":43,"index":344}}],"key":"bGUa+dDG2WEhPiIlobT3urS95UE=","exportNames":["*"]}}],"output":[{"data":{"code":"__d(function(g,r,i,a,m,_e,d){var e=r(d[0],\"@babel/runtime/helpers/interopRequireDefault\");Object.defineProperty(_e,\"__esModule\",{value:!0}),_e.default=void 0;var t=e(r(d[1],\"@babel/runtime/helpers/objectSpread2\")),s=e(r(d[2],\"fbjs/lib/invariant\"));_e.default=class{constructor(e){var t=e.onMoreTasks;this._onMoreTasks=t,this._queueStack=[{tasks:[],popable:!0}]}enqueue(e){this._getCurrentQueue().push(e)}enqueueTasks(e){e.forEach(e=>this.enqueue(e))}cancelTasks(e){this._queueStack=this._queueStack.map(s=>(0,t.default)((0,t.default)({},s),{},{tasks:s.tasks.filter(t=>-1===e.indexOf(t))})).filter((e,t)=>e.tasks.length>0||0===t)}hasTasksToProcess(){return this._getCurrentQueue().length>0}processNext(){var e=this._getCurrentQueue();if(e.length){var t=e.shift();try{'object'==typeof t&&t.gen?this._genPromise(t):'object'==typeof t&&t.run?t.run():((0,s.default)('function'==typeof t,'Expected Function, SimpleTask, or PromiseTask, but got:\\n'+JSON.stringify(t,null,2)),t())}catch(e){throw e.message='TaskQueue: Error with task '+(t.name||'')+': '+e.message,e}}}_getCurrentQueue(){var e=this._queueStack.length-1,t=this._queueStack[e];return t.popable&&0===t.tasks.length&&e>0?(this._queueStack.pop(),this._getCurrentQueue()):t.tasks}_genPromise(e){var t=this._queueStack.push({tasks:[],popable:!1})-1,s=this._queueStack[t];e.gen().then(()=>{s.popable=!0,this.hasTasksToProcess()&&this._onMoreTasks()}).catch(t=>{setTimeout(()=>{throw t.message=\"TaskQueue: Error resolving Promise in task \"+e.name+\": \"+t.message,t},0)})}}});","lineCount":1,"map":[[1,158,1,0],[1,162,1,0,"_objectSpread2"],[1,164,1,0,"_interopRequireDefault"],[1,166,1,0,"r"],[1,168,1,0,"d"],[1,170,1,0],[1,214,12,0,"_invariant"],[1,216,12,0,"_interopRequireDefault"],[1,218,12,0,"r"],[1,220,12,0,"d"],[1,222,12,0],[1,248,86,1,"_e"],[1,251,86,1,"default"],[1,259,13,0],[1,265,14,2,"constructor"],[1,277,14,14,"_ref"],[1,280,15,4],[1,284,15,8,"onMoreTasks"],[1,286,15,22,"_ref"],[1,288,15,27,"onMoreTasks"],[1,300,16,4,"this"],[1,305,16,9,"_onMoreTasks"],[1,318,16,24,"onMoreTasks"],[1,320,17,4,"this"],[1,325,17,9,"_queueStack"],[1,337,17,23],[1,338,17,24],[1,339,18,6,"tasks"],[1,345,18,13],[1,348,19,6,"popable"],[1,357,19,15],[1,360,21,2],[1,361,22,2,"enqueue"],[1,369,22,10,"task"],[1,372,23,4,"this"],[1,377,23,9,"_getCurrentQueue"],[1,396,23,28,"push"],[1,401,23,33,"task"],[1,403,24,2],[1,404,25,2,"enqueueTasks"],[1,417,25,15,"tasks"],[1,420,26,4,"tasks"],[1,422,26,10,"forEach"],[1,430,26,18,"task"],[1,433,26,26,"this"],[1,438,26,31,"enqueue"],[1,446,26,39,"task"],[1,449,27,2],[1,450,28,2,"cancelTasks"],[1,462,28,14,"tasksToCancel"],[1,465,29,4,"this"],[1,470,29,9,"_queueStack"],[1,482,29,23,"this"],[1,487,29,28,"_queueStack"],[1,499,29,40,"map"],[1,503,29,44,"queue"],[1,507,29,53],[1,509,29,53,"_objectSpread"],[1,521,29,67],[1,523,29,67,"_objectSpread"],[1,534,29,81],[1,535,29,82],[1,537,29,85,"queue"],[1,540,29,93],[1,541,29,94],[1,543,29,97],[1,544,30,6,"tasks"],[1,550,30,13,"queue"],[1,552,30,19,"tasks"],[1,558,30,25,"filter"],[1,565,30,32,"task"],[1,569,30,73],[1,573,30,40,"tasksToCancel"],[1,575,30,54,"indexOf"],[1,583,30,62,"task"],[1,590,31,8,"filter"],[1,597,31,15],[1,598,31,16,"queue"],[1,600,31,23,"idx"],[1,604,31,31,"queue"],[1,606,31,37,"tasks"],[1,612,31,43,"length"],[1,619,31,52],[1,622,31,65],[1,626,31,57,"idx"],[1,628,32,2],[1,629,33,2,"hasTasksToProcess"],[1,649,34,4],[1,656,34,11,"this"],[1,661,34,16,"_getCurrentQueue"],[1,680,34,35,"length"],[1,687,34,44],[1,688,35,2],[1,689,40,2,"processNext"],[1,703,41,4],[1,707,41,8,"queue"],[1,709,41,16,"this"],[1,714,41,21,"_getCurrentQueue"],[1,733,42,4],[1,736,42,8,"queue"],[1,738,42,14,"length"],[1,745,42,22],[1,746,43,6],[1,750,43,10,"task"],[1,752,43,17,"queue"],[1,754,43,23,"shift"],[1,762,44,6],[1,766,45,28],[1,783,45,19,"task"],[1,786,45,40,"task"],[1,788,45,45,"gen"],[1,792,46,10,"this"],[1,797,46,15,"_genPromise"],[1,809,46,27,"task"],[1,812,47,35],[1,829,47,26,"task"],[1,832,47,47,"task"],[1,834,47,52,"run"],[1,838,48,10,"task"],[1,840,48,15,"run"],[1,848,50,10],[1,850,50,10,"invariant"],[1,861,50,36],[1,880,50,27,"task"],[1,882,50,48],[1,942,50,110,"JSON"],[1,947,50,115,"stringify"],[1,957,50,125,"task"],[1,959,50,131],[1,964,50,137],[1,968,51,10,"task"],[1,972,53,6],[1,973,53,8],[1,979,53,15,"e"],[1,982,55,8],[1,988,54,8,"e"],[1,990,54,10,"message"],[1,998,54,20],[1,1029,54,53,"task"],[1,1031,54,58,"name"],[1,1037,54,66],[1,1041,54,72],[1,1046,54,79,"e"],[1,1048,54,81,"message"],[1,1056,55,14,"e"],[1,1057,56,6],[1,1058,57,4],[1,1059,58,2],[1,1060,59,2,"_getCurrentQueue"],[1,1079,60,4],[1,1083,60,8,"stackIdx"],[1,1085,60,19,"this"],[1,1090,60,24,"_queueStack"],[1,1102,60,36,"length"],[1,1109,60,45],[1,1111,61,8,"queue"],[1,1113,61,16,"this"],[1,1118,61,21,"_queueStack"],[1,1130,61,33,"stackIdx"],[1,1133,62,4],[1,1140,62,8,"queue"],[1,1142,62,14,"popable"],[1,1151,62,48],[1,1155,62,25,"queue"],[1,1157,62,31,"tasks"],[1,1163,62,37,"length"],[1,1171,62,53,"stackIdx"],[1,1173,62,64],[1,1176,63,6,"this"],[1,1181,63,11,"_queueStack"],[1,1193,63,23,"pop"],[1,1199,64,13,"this"],[1,1204,64,18,"_getCurrentQueue"],[1,1224,66,13,"queue"],[1,1226,66,19,"tasks"],[1,1231,68,2],[1,1232,69,2,"_genPromise"],[1,1244,69,14,"task"],[1,1247,70,4],[1,1251,74,8,"stackIdx"],[1,1253,70,17,"this"],[1,1258,70,22,"_queueStack"],[1,1270,70,34,"push"],[1,1275,70,39],[1,1276,71,6,"tasks"],[1,1282,71,13],[1,1285,72,6,"popable"],[1,1294,72,15],[1,1298,74,28],[1,1300,75,8,"stackItem"],[1,1302,75,20,"this"],[1,1307,75,25,"_queueStack"],[1,1319,75,37,"stackIdx"],[1,1322,76,4,"task"],[1,1324,76,9,"gen"],[1,1330,76,15,"then"],[1,1335,76,20],[1,1340,77,6,"stackItem"],[1,1342,77,16,"popable"],[1,1351,77,26],[1,1353,78,6,"this"],[1,1358,78,11,"hasTasksToProcess"],[1,1379,78,34,"this"],[1,1384,78,39,"_onMoreTasks"],[1,1401,79,7,"catch"],[1,1407,79,13,"ex"],[1,1411,80,6,"setTimeout"],[1,1422,80,17],[1,1427,82,8],[1,1433,81,8,"ex"],[1,1435,81,11,"message"],[1,1443,81,21],[1,1489,81,69,"task"],[1,1491,81,74,"name"],[1,1496,81,81],[1,1501,81,88,"ex"],[1,1503,81,91,"message"],[1,1511,82,14,"ex"],[1,1514,83,9],[1,1518,85,2],[1,1520,87,24],[1,1523]],"functionMap":{"names":["<global>","TaskQueue","constructor","enqueue","enqueueTasks","tasks.forEach$argument_0","cancelTasks","_queueStack.map$argument_0","queue.tasks.filter$argument_0","_queueStack.map.filter$argument_0","hasTasksToProcess","processNext","_getCurrentQueue","_genPromise","task.gen.then$argument_0","task.gen.then._catch$argument_0","setTimeout$argument_0"],"mappings":"AAA;ACY;ECC;GDO;EEC;GFE;EGC;kBCC,0BD;GHC;EKC;4CCC;gCCC,0CD;MDC,SG,mDH;GLC;ESC;GTE;EUK;GVkB;EWC;GXS;EYC;oBCO;KDG,QE;iBCC;ODG;KFC;GZC;CDC"}},"type":"js/module"}]}