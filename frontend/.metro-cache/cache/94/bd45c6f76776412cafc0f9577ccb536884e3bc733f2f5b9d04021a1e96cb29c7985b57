{"dependencies":[{"name":"./interlace","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":3,"column":21,"index":36},"end":{"line":3,"column":43,"index":58}}],"key":"N/IHRJiIVu/2RUMe3Em0ytXfNgI=","exportNames":["*"]}},{"name":"./paeth-predictor","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":4,"column":21,"index":81},"end":{"line":4,"column":49,"index":109}}],"key":"fI75YoBtRz24BS7MNevPq6rzxzY=","exportNames":["*"]}}],"output":[{"data":{"code":"__d(function(g,r,_i,a,m,e,d){\"use strict\";let t=r(d[0]),i=r(d[1]);function s(t,i,s){let n=t*i;return 8!==s&&(n=Math.ceil(n/(8/s))),n}let n=m.exports=function(i,n){let h=i.width,l=i.height,o=i.interlace,p=i.bpp,_=i.depth;if(this.read=n.read,this.write=n.write,this.complete=n.complete,this._imageIndex=0,this._images=[],o){let i=t.getImagePasses(h,l);for(let t=0;t<i.length;t++)this._images.push({byteWidth:s(i[t].width,p,_),height:i[t].height,lineIndex:0})}else this._images.push({byteWidth:s(h,p,_),height:l,lineIndex:0});this._xComparison=8===_?p:16===_?2*p:1};n.prototype.start=function(){this.read(this._images[this._imageIndex].byteWidth+1,this._reverseFilterLine.bind(this))},n.prototype._unFilterType1=function(t,i,s){let n=this._xComparison,h=n-1;for(let l=0;l<s;l++){let s=t[1+l],o=l>h?i[l-n]:0;i[l]=s+o}},n.prototype._unFilterType2=function(t,i,s){let n=this._lastLine;for(let h=0;h<s;h++){let s=t[1+h],l=n?n[h]:0;i[h]=s+l}},n.prototype._unFilterType3=function(t,i,s){let n=this._xComparison,h=n-1,l=this._lastLine;for(let o=0;o<s;o++){let s=t[1+o],p=l?l[o]:0,_=o>h?i[o-n]:0,u=Math.floor((_+p)/2);i[o]=s+u}},n.prototype._unFilterType4=function(t,s,n){let h=this._xComparison,l=h-1,o=this._lastLine;for(let p=0;p<n;p++){let n=t[1+p],_=o?o[p]:0,u=p>l?s[p-h]:0,c=p>l&&o?o[p-h]:0,f=i(u,_,c);s[p]=n+f}},n.prototype._reverseFilterLine=function(t){let i,s=t[0],n=this._images[this._imageIndex],h=n.byteWidth;if(0===s)i=t.slice(1,h+1);else switch(i=Buffer.alloc(h),s){case 1:this._unFilterType1(t,i,h);break;case 2:this._unFilterType2(t,i,h);break;case 3:this._unFilterType3(t,i,h);break;case 4:this._unFilterType4(t,i,h);break;default:throw new Error(\"Unrecognised filter type - \"+s)}this.write(i),n.lineIndex++,n.lineIndex>=n.height?(this._lastLine=null,this._imageIndex++,n=this._images[this._imageIndex]):this._lastLine=i,n?this.read(n.byteWidth+1,this._reverseFilterLine.bind(this)):(this._lastLine=null,this.complete())}});","lineCount":1,"map":[[1,29,1,0],[1,42,3,0],[1,46,3,4,"interlaceUtils"],[1,48,3,21,"require"],[1,50,3,28,"d"],[1,52,3,28],[1,56,4,4,"paethPredictor"],[1,58,4,21,"require"],[1,60,4,28,"d"],[1,62,4,28],[1,66,6,0],[1,75,6,9,"getByteWidth"],[1,77,6,22,"width"],[1,79,6,29,"bpp"],[1,81,6,34,"depth"],[1,84,7,2],[1,88,7,6,"byteWidth"],[1,90,7,18,"width"],[1,92,7,26,"bpp"],[1,94,11,2],[1,101,8,16],[1,105,8,6,"depth"],[1,109,9,4,"byteWidth"],[1,111,9,16,"Math"],[1,116,9,21,"ceil"],[1,121,9,26,"byteWidth"],[1,124,9,39],[1,126,9,43,"depth"],[1,131,11,9,"byteWidth"],[1,132,12,0],[1,133,14,0],[1,137,14,4,"Filter"],[1,139,14,14,"module"],[1,141,14,21,"exports"],[1,149,14,31],[1,158,14,41,"bitmapInfo"],[1,160,14,53,"dependencies"],[1,163,15,2],[1,167,15,6,"width"],[1,169,15,14,"bitmapInfo"],[1,171,15,25,"width"],[1,177,16,6,"height"],[1,179,16,15,"bitmapInfo"],[1,181,16,26,"height"],[1,188,17,6,"interlace"],[1,190,17,18,"bitmapInfo"],[1,192,17,29,"interlace"],[1,202,18,6,"bpp"],[1,204,18,12,"bitmapInfo"],[1,206,18,23,"bpp"],[1,210,19,6,"depth"],[1,212,19,14,"bitmapInfo"],[1,214,19,25,"depth"],[1,220,27,2],[1,223,21,2,"this"],[1,228,21,7,"read"],[1,233,21,14,"dependencies"],[1,235,21,27,"read"],[1,240,22,2,"this"],[1,245,22,7,"write"],[1,251,22,15,"dependencies"],[1,253,22,28,"write"],[1,259,23,2,"this"],[1,264,23,7,"complete"],[1,273,23,18,"dependencies"],[1,275,23,31,"complete"],[1,284,25,2,"this"],[1,289,25,7,"_imageIndex"],[1,301,25,21],[1,303,26,2,"this"],[1,308,26,7,"_images"],[1,316,26,17],[1,319,27,6,"interlace"],[1,321,27,17],[1,322,28,4],[1,326,28,8,"passes"],[1,328,28,17,"interlaceUtils"],[1,330,28,32,"getImagePasses"],[1,345,28,47,"width"],[1,347,28,54,"height"],[1,350,29,4],[1,354,29,9],[1,358,29,13,"i"],[1,360,29,17],[1,362,29,20,"i"],[1,364,29,24,"passes"],[1,366,29,31,"length"],[1,373,29,39,"i"],[1,377,30,6,"this"],[1,382,30,11,"_images"],[1,390,30,19,"push"],[1,395,30,24],[1,396,31,8,"byteWidth"],[1,406,31,19,"getByteWidth"],[1,408,31,32,"passes"],[1,410,31,39,"i"],[1,413,31,42,"width"],[1,419,31,49,"bpp"],[1,421,31,54,"depth"],[1,424,32,8,"height"],[1,431,32,16,"passes"],[1,433,32,23,"i"],[1,436,32,26,"height"],[1,443,33,8,"lineIndex"],[1,453,33,19],[1,456,36,2],[1,462,37,4,"this"],[1,467,37,9,"_images"],[1,475,37,17,"push"],[1,480,37,22],[1,481,38,6,"byteWidth"],[1,491,38,17,"getByteWidth"],[1,493,38,30,"width"],[1,495,38,37,"bpp"],[1,497,38,42,"depth"],[1,500,39,6,"height"],[1,507,39,14,"height"],[1,509,40,6,"lineIndex"],[1,519,40,17],[1,523,49,4,"this"],[1,528,49,9,"_xComparison"],[1,541,48,16],[1,545,48,6,"depth"],[1,547,49,24,"bpp"],[1,549,50,23],[1,554,50,13,"depth"],[1,556,51,30],[1,558,51,24,"bpp"],[1,560,53,24],[1,561,55,0],[1,563,57,0,"Filter"],[1,565,57,7,"prototype"],[1,575,57,17,"start"],[1,581,57,25],[1,592,58,2,"this"],[1,597,58,7,"read"],[1,602,59,4,"this"],[1,607,59,9,"_images"],[1,615,59,17,"this"],[1,620,59,22,"_imageIndex"],[1,633,59,35,"byteWidth"],[1,643,59,47],[1,645,60,4,"this"],[1,650,60,9,"_reverseFilterLine"],[1,669,60,28,"bind"],[1,674,60,33,"this"],[1,680,62,0],[1,682,64,0,"Filter"],[1,684,64,7,"prototype"],[1,694,64,17,"_unFilterType1"],[1,709,64,34],[1,718,65,2,"rawData"],[1,720,66,2,"unfilteredLine"],[1,722,67,2,"byteWidth"],[1,725,69,2],[1,729,69,6,"xComparison"],[1,731,69,20,"this"],[1,736,69,25,"_xComparison"],[1,749,70,6,"xBiggerThan"],[1,751,70,20,"xComparison"],[1,753,70,34],[1,755,72,2],[1,759,72,7],[1,763,72,11,"x"],[1,765,72,15],[1,767,72,18,"x"],[1,769,72,22,"byteWidth"],[1,771,72,33,"x"],[1,775,72,38],[1,776,73,4],[1,780,73,8,"rawByte"],[1,782,73,18,"rawData"],[1,784,73,26],[1,786,73,30,"x"],[1,789,74,8,"f1Left"],[1,791,74,17,"x"],[1,793,74,21,"xBiggerThan"],[1,795,74,35,"unfilteredLine"],[1,797,74,50,"x"],[1,799,74,54,"xComparison"],[1,802,74,69],[1,804,75,4,"unfilteredLine"],[1,806,75,19,"x"],[1,809,75,24,"rawByte"],[1,811,75,34,"f1Left"],[1,812,76,2],[1,813,77,0],[1,815,79,0,"Filter"],[1,817,79,7,"prototype"],[1,827,79,17,"_unFilterType2"],[1,842,79,34],[1,851,80,2,"rawData"],[1,853,81,2,"unfilteredLine"],[1,855,82,2,"byteWidth"],[1,858,84,2],[1,862,84,6,"lastLine"],[1,864,84,17,"this"],[1,869,84,22,"_lastLine"],[1,879,86,2],[1,883,86,7],[1,887,86,11,"x"],[1,889,86,15],[1,891,86,18,"x"],[1,893,86,22,"byteWidth"],[1,895,86,33,"x"],[1,899,86,38],[1,900,87,4],[1,904,87,8,"rawByte"],[1,906,87,18,"rawData"],[1,908,87,26],[1,910,87,30,"x"],[1,913,88,8,"f2Up"],[1,915,88,15,"lastLine"],[1,917,88,26,"lastLine"],[1,919,88,35,"x"],[1,922,88,40],[1,924,89,4,"unfilteredLine"],[1,926,89,19,"x"],[1,929,89,24,"rawByte"],[1,931,89,34,"f2Up"],[1,932,90,2],[1,933,91,0],[1,935,93,0,"Filter"],[1,937,93,7,"prototype"],[1,947,93,17,"_unFilterType3"],[1,962,93,34],[1,971,94,2,"rawData"],[1,973,95,2,"unfilteredLine"],[1,975,96,2,"byteWidth"],[1,978,98,2],[1,982,98,6,"xComparison"],[1,984,98,20,"this"],[1,989,98,25,"_xComparison"],[1,1002,99,6,"xBiggerThan"],[1,1004,99,20,"xComparison"],[1,1006,99,34],[1,1008,100,6,"lastLine"],[1,1010,100,17,"this"],[1,1015,100,22,"_lastLine"],[1,1025,102,2],[1,1029,102,7],[1,1033,102,11,"x"],[1,1035,102,15],[1,1037,102,18,"x"],[1,1039,102,22,"byteWidth"],[1,1041,102,33,"x"],[1,1045,102,38],[1,1046,103,4],[1,1050,103,8,"rawByte"],[1,1052,103,18,"rawData"],[1,1054,103,26],[1,1056,103,30,"x"],[1,1059,104,8,"f3Up"],[1,1061,104,15,"lastLine"],[1,1063,104,26,"lastLine"],[1,1065,104,35,"x"],[1,1068,104,40],[1,1070,105,8,"f3Left"],[1,1072,105,17,"x"],[1,1074,105,21,"xBiggerThan"],[1,1076,105,35,"unfilteredLine"],[1,1078,105,50,"x"],[1,1080,105,54,"xComparison"],[1,1083,105,69],[1,1085,106,8,"f3Add"],[1,1087,106,16,"Math"],[1,1092,106,21,"floor"],[1,1099,106,28,"f3Left"],[1,1101,106,37,"f3Up"],[1,1104,106,45],[1,1107,107,4,"unfilteredLine"],[1,1109,107,19,"x"],[1,1112,107,24,"rawByte"],[1,1114,107,34,"f3Add"],[1,1115,108,2],[1,1116,109,0],[1,1118,111,0,"Filter"],[1,1120,111,7,"prototype"],[1,1130,111,17,"_unFilterType4"],[1,1145,111,34],[1,1154,112,2,"rawData"],[1,1156,113,2,"unfilteredLine"],[1,1158,114,2,"byteWidth"],[1,1161,116,2],[1,1165,116,6,"xComparison"],[1,1167,116,20,"this"],[1,1172,116,25,"_xComparison"],[1,1185,117,6,"xBiggerThan"],[1,1187,117,20,"xComparison"],[1,1189,117,34],[1,1191,118,6,"lastLine"],[1,1193,118,17,"this"],[1,1198,118,22,"_lastLine"],[1,1208,120,2],[1,1212,120,7],[1,1216,120,11,"x"],[1,1218,120,15],[1,1220,120,18,"x"],[1,1222,120,22,"byteWidth"],[1,1224,120,33,"x"],[1,1228,120,38],[1,1229,121,4],[1,1233,121,8,"rawByte"],[1,1235,121,18,"rawData"],[1,1237,121,26],[1,1239,121,30,"x"],[1,1242,122,8,"f4Up"],[1,1244,122,15,"lastLine"],[1,1246,122,26,"lastLine"],[1,1248,122,35,"x"],[1,1251,122,40],[1,1253,123,8,"f4Left"],[1,1255,123,17,"x"],[1,1257,123,21,"xBiggerThan"],[1,1259,123,35,"unfilteredLine"],[1,1261,123,50,"x"],[1,1263,123,54,"xComparison"],[1,1266,123,69],[1,1268,124,8,"f4UpLeft"],[1,1270,124,19,"x"],[1,1272,124,23,"xBiggerThan"],[1,1275,124,38,"lastLine"],[1,1277,124,49,"lastLine"],[1,1279,124,58,"x"],[1,1281,124,62,"xComparison"],[1,1284,124,77],[1,1286,125,8,"f4Add"],[1,1288,125,16,"paethPredictor"],[1,1290,125,31,"f4Left"],[1,1292,125,39,"f4Up"],[1,1294,125,45,"f4UpLeft"],[1,1297,126,4,"unfilteredLine"],[1,1299,126,19,"x"],[1,1302,126,24,"rawByte"],[1,1304,126,34,"f4Add"],[1,1305,127,2],[1,1306,128,0],[1,1308,130,0,"Filter"],[1,1310,130,7,"prototype"],[1,1320,130,17,"_reverseFilterLine"],[1,1339,130,38],[1,1348,130,48,"rawData"],[1,1351,131,2],[1,1355,132,6,"unfilteredLine"],[1,1357,131,6,"filter"],[1,1359,131,15,"rawData"],[1,1361,131,23],[1,1364,133,6,"currentImage"],[1,1366,133,21,"this"],[1,1371,133,26,"_images"],[1,1379,133,34,"this"],[1,1384,133,39,"_imageIndex"],[1,1397,134,6,"byteWidth"],[1,1399,134,18,"currentImage"],[1,1401,134,31,"byteWidth"],[1,1411,136,2],[1,1414,136,17],[1,1418,136,6,"filter"],[1,1420,137,4,"unfilteredLine"],[1,1422,137,21,"rawData"],[1,1424,137,29,"slice"],[1,1430,137,35],[1,1432,137,38,"byteWidth"],[1,1434,137,50],[1,1442,141,4],[1,1449,139,4,"unfilteredLine"],[1,1451,139,21,"Buffer"],[1,1458,139,28,"alloc"],[1,1464,139,34,"byteWidth"],[1,1467,141,12,"filter"],[1,1470,142,6],[1,1475,142,11],[1,1477,143,8,"this"],[1,1482,143,13,"_unFilterType1"],[1,1497,143,28,"rawData"],[1,1499,143,37,"unfilteredLine"],[1,1501,143,53,"byteWidth"],[1,1504,144,8],[1,1510,145,6],[1,1515,145,11],[1,1517,146,8,"this"],[1,1522,146,13,"_unFilterType2"],[1,1537,146,28,"rawData"],[1,1539,146,37,"unfilteredLine"],[1,1541,146,53,"byteWidth"],[1,1544,147,8],[1,1550,148,6],[1,1555,148,11],[1,1557,149,8,"this"],[1,1562,149,13,"_unFilterType3"],[1,1577,149,28,"rawData"],[1,1579,149,37,"unfilteredLine"],[1,1581,149,53,"byteWidth"],[1,1584,150,8],[1,1590,151,6],[1,1595,151,11],[1,1597,152,8,"this"],[1,1602,152,13,"_unFilterType4"],[1,1617,152,28,"rawData"],[1,1619,152,37,"unfilteredLine"],[1,1621,152,53,"byteWidth"],[1,1624,153,8],[1,1630,154,6],[1,1638,155,8],[1,1644,155,14],[1,1648,155,18,"Error"],[1,1654,155,24],[1,1684,155,56,"filter"],[1,1687,159,2,"this"],[1,1692,159,7,"write"],[1,1698,159,13,"unfilteredLine"],[1,1701,161,2,"currentImage"],[1,1703,161,15,"lineIndex"],[1,1715,162,6,"currentImage"],[1,1717,162,19,"lineIndex"],[1,1728,162,32,"currentImage"],[1,1730,162,45,"height"],[1,1738,163,4,"this"],[1,1743,163,9,"_lastLine"],[1,1753,163,21],[1,1758,164,4,"this"],[1,1763,164,9,"_imageIndex"],[1,1777,165,4,"currentImage"],[1,1779,165,19,"this"],[1,1784,165,24,"_images"],[1,1792,165,32,"this"],[1,1797,165,37,"_imageIndex"],[1,1811,167,4,"this"],[1,1816,167,9,"_lastLine"],[1,1826,167,21,"unfilteredLine"],[1,1828,170,6,"currentImage"],[1,1830,172,4,"this"],[1,1835,172,9,"read"],[1,1840,172,14,"currentImage"],[1,1842,172,27,"byteWidth"],[1,1852,172,39],[1,1854,172,42,"this"],[1,1859,172,47,"_reverseFilterLine"],[1,1878,172,66,"bind"],[1,1883,172,71,"this"],[1,1891,174,4,"this"],[1,1896,174,9,"_lastLine"],[1,1906,174,21],[1,1911,175,4,"this"],[1,1916,175,9,"complete"],[1,1927,177,0],[1,1928,177,2],[1,1931]],"functionMap":{"names":["<global>","getByteWidth","module.exports","Filter.prototype.start","Filter.prototype._unFilterType1","Filter.prototype._unFilterType2","Filter.prototype._unFilterType3","Filter.prototype._unFilterType4","Filter.prototype._reverseFilterLine"],"mappings":"AAA;ACK;CDM;+BEE;CFyC;yBGE;CHK;kCIE;CJa;kCKE;CLY;kCME;CNgB;kCOE;CPiB;sCQE;CR+C"}},"type":"js/module"}]}