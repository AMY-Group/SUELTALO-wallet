{"dependencies":[{"name":"util","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":3,"column":11,"index":26},"end":{"line":3,"column":26,"index":41}}],"key":"plO20G0zye191TqKMAMeOagk9EI=","exportNames":["*"]}},{"name":"zlib","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":4,"column":11,"index":54},"end":{"line":4,"column":26,"index":69}}],"key":"7ZGzBJgs2mS8aYt35oOcBHDVVuM=","exportNames":["*"]}},{"name":"./chunkstream","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":5,"column":18,"index":89},"end":{"line":5,"column":42,"index":113}}],"key":"m8eez9Rwdm6lsFx8XFSxpfxTxok=","exportNames":["*"]}},{"name":"./filter-parse-async","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":6,"column":18,"index":133},"end":{"line":6,"column":49,"index":164}}],"key":"4nUgAmfOjLRyuxrqnWWS6XYDhZM=","exportNames":["*"]}},{"name":"./parser","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":7,"column":13,"index":179},"end":{"line":7,"column":32,"index":198}}],"key":"FmGTSeJZ/sRo3ZQza+Wy1CXXMyM=","exportNames":["*"]}},{"name":"./bitmapper","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":8,"column":16,"index":216},"end":{"line":8,"column":38,"index":238}}],"key":"vi8139EPiWWyzftijfzSH1CHXks=","exportNames":["*"]}},{"name":"./format-normaliser","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":9,"column":23,"index":263},"end":{"line":9,"column":53,"index":293}}],"key":"ypTMryKQtTShoBQSBqdvn+nzLUE=","exportNames":["*"]}}],"output":[{"data":{"code":"__d(function(g,r,i,a,m,e,d){\"use strict\";let t=r(d[0]),n=r(d[1]),s=r(d[2]),h=r(d[3]),o=r(d[4]),l=r(d[5]),_=r(d[6]),f=m.exports=function(t){s.call(this),this._parser=new o(t,{read:this.read.bind(this),error:this._handleError.bind(this),metadata:this._handleMetaData.bind(this),gamma:this.emit.bind(this,\"gamma\"),palette:this._handlePalette.bind(this),transColor:this._handleTransColor.bind(this),finished:this._finished.bind(this),inflateData:this._inflateData.bind(this),simpleTransparency:this._simpleTransparency.bind(this),headersFinished:this._headersFinished.bind(this)}),this._options=t,this.writable=!0,this._parser.start()};t.inherits(f,s),f.prototype._handleError=function(t){this.emit(\"error\",t),this.writable=!1,this.destroy(),this._inflate&&this._inflate.destroy&&this._inflate.destroy(),this._filter&&(this._filter.destroy(),this._filter.on(\"error\",function(){})),this.errord=!0},f.prototype._inflateData=function(t){if(!this._inflate)if(this._bitmapInfo.interlace)this._inflate=n.createInflate(),this._inflate.on(\"error\",this.emit.bind(this,\"error\")),this._filter.on(\"complete\",this._complete.bind(this)),this._inflate.pipe(this._filter);else{let t=(1+(this._bitmapInfo.width*this._bitmapInfo.bpp*this._bitmapInfo.depth+7>>3))*this._bitmapInfo.height,s=Math.max(t,n.Z_MIN_CHUNK);this._inflate=n.createInflate({chunkSize:s});let h=t,o=this.emit.bind(this,\"error\");this._inflate.on(\"error\",function(t){h&&o(t)}),this._filter.on(\"complete\",this._complete.bind(this));let l=this._filter.write.bind(this._filter);this._inflate.on(\"data\",function(t){h&&(t.length>h&&(t=t.slice(0,h)),h-=t.length,l(t))}),this._inflate.on(\"end\",this._filter.end.bind(this._filter))}this._inflate.write(t)},f.prototype._handleMetaData=function(t){this._metaData=t,this._bitmapInfo=Object.create(t),this._filter=new h(this._bitmapInfo)},f.prototype._handleTransColor=function(t){this._bitmapInfo.transColor=t},f.prototype._handlePalette=function(t){this._bitmapInfo.palette=t},f.prototype._simpleTransparency=function(){this._metaData.alpha=!0},f.prototype._headersFinished=function(){this.emit(\"metadata\",this._metaData)},f.prototype._finished=function(){this.errord||(this._inflate?this._inflate.end():this.emit(\"error\",\"No Inflate block\"))},f.prototype._complete=function(t){if(this.errord)return;let n;try{let s=l.dataToBitMap(t,this._bitmapInfo);n=_(s,this._bitmapInfo),s=null}catch(t){return void this._handleError(t)}this.emit(\"parsed\",n)}});","lineCount":1,"map":[[1,28,1,0],[1,41,3,0],[1,45,3,4,"util"],[1,47,3,11,"require"],[1,49,3,18,"d"],[1,51,3,18],[1,55,4,4,"zlib"],[1,57,4,11,"require"],[1,59,4,18,"d"],[1,61,4,18],[1,65,5,4,"ChunkStream"],[1,67,5,18,"require"],[1,69,5,25,"d"],[1,71,5,25],[1,75,6,4,"FilterAsync"],[1,77,6,18,"require"],[1,79,6,25,"d"],[1,81,6,25],[1,85,7,4,"Parser"],[1,87,7,13,"require"],[1,89,7,20,"d"],[1,91,7,20],[1,95,8,4,"bitmapper"],[1,97,8,16,"require"],[1,99,8,23,"d"],[1,101,8,23],[1,105,9,4,"formatNormaliser"],[1,107,9,23,"require"],[1,109,9,30,"d"],[1,111,9,30],[1,115,11,4,"ParserAsync"],[1,117,11,19,"module"],[1,119,11,26,"exports"],[1,127,11,36],[1,136,11,46,"options"],[1,139,12,2,"ChunkStream"],[1,141,12,14,"call"],[1,146,12,19,"this"],[1,152,14,2,"this"],[1,157,14,7,"_parser"],[1,165,14,17],[1,169,14,21,"Parser"],[1,171,14,28,"options"],[1,173,14,37],[1,174,15,4,"read"],[1,179,15,10,"this"],[1,184,15,15,"read"],[1,189,15,20,"bind"],[1,194,15,25,"this"],[1,200,16,4,"error"],[1,206,16,11,"this"],[1,211,16,16,"_handleError"],[1,224,16,29,"bind"],[1,229,16,34,"this"],[1,235,17,4,"metadata"],[1,244,17,14,"this"],[1,249,17,19,"_handleMetaData"],[1,265,17,35,"bind"],[1,270,17,40,"this"],[1,276,18,4,"gamma"],[1,282,18,11,"this"],[1,287,18,16,"emit"],[1,292,18,21,"bind"],[1,297,18,26,"this"],[1,302,18,32],[1,311,19,4,"palette"],[1,319,19,13,"this"],[1,324,19,18,"_handlePalette"],[1,339,19,33,"bind"],[1,344,19,38,"this"],[1,350,20,4,"transColor"],[1,361,20,16,"this"],[1,366,20,21,"_handleTransColor"],[1,384,20,39,"bind"],[1,389,20,44,"this"],[1,395,21,4,"finished"],[1,404,21,14,"this"],[1,409,21,19,"_finished"],[1,419,21,29,"bind"],[1,424,21,34,"this"],[1,430,22,4,"inflateData"],[1,442,22,17,"this"],[1,447,22,22,"_inflateData"],[1,460,22,35,"bind"],[1,465,22,40,"this"],[1,471,23,4,"simpleTransparency"],[1,490,23,24,"this"],[1,495,23,29,"_simpleTransparency"],[1,515,23,49,"bind"],[1,520,23,54,"this"],[1,526,24,4,"headersFinished"],[1,542,24,21,"this"],[1,547,24,26,"_headersFinished"],[1,564,24,43,"bind"],[1,569,24,48,"this"],[1,577,26,2,"this"],[1,582,26,7,"_options"],[1,591,26,18,"options"],[1,593,27,2,"this"],[1,598,27,7,"writable"],[1,608,27,18],[1,610,29,2,"this"],[1,615,29,7,"_parser"],[1,623,29,15,"start"],[1,630,30,0],[1,632,31,0,"util"],[1,634,31,5,"inherits"],[1,643,31,14,"ParserAsync"],[1,645,31,27,"ChunkStream"],[1,648,33,0,"ParserAsync"],[1,650,33,12,"prototype"],[1,660,33,22,"_handleError"],[1,673,33,37],[1,682,33,47,"err"],[1,685,34,2,"this"],[1,690,34,7,"emit"],[1,695,34,12],[1,703,34,21,"err"],[1,706,36,2,"this"],[1,711,36,7,"writable"],[1,721,36,18],[1,723,38,2,"this"],[1,728,38,7,"destroy"],[1,738,40,6,"this"],[1,743,40,11,"_inflate"],[1,753,40,23,"this"],[1,758,40,28,"_inflate"],[1,767,40,37,"destroy"],[1,776,41,4,"this"],[1,781,41,9,"_inflate"],[1,790,41,18,"destroy"],[1,800,44,6,"this"],[1,805,44,11,"_filter"],[1,815,45,4,"this"],[1,820,45,9,"_filter"],[1,828,45,17,"destroy"],[1,838,49,4,"this"],[1,843,49,9,"_filter"],[1,851,49,17,"on"],[1,854,49,20],[1,862,49,29],[1,873,49,42],[1,877,52,2,"this"],[1,882,52,7,"errord"],[1,890,52,16],[1,891,53,0],[1,893,55,0,"ParserAsync"],[1,895,55,12,"prototype"],[1,905,55,22,"_inflateData"],[1,918,55,37],[1,927,55,47,"data"],[1,930,56,2],[1,934,56,7,"this"],[1,939,56,12,"_inflate"],[1,948,57,4],[1,951,57,8,"this"],[1,956,57,13,"_bitmapInfo"],[1,968,57,25,"interlace"],[1,978,58,6,"this"],[1,983,58,11,"_inflate"],[1,992,58,22,"zlib"],[1,994,58,27,"createInflate"],[1,1010,60,6,"this"],[1,1015,60,11,"_inflate"],[1,1024,60,20,"on"],[1,1027,60,23],[1,1035,60,32,"this"],[1,1040,60,37,"emit"],[1,1045,60,42,"bind"],[1,1050,60,47,"this"],[1,1055,60,53],[1,1065,61,6,"this"],[1,1070,61,11,"_filter"],[1,1078,61,19,"on"],[1,1081,61,22],[1,1092,61,34,"this"],[1,1097,61,39,"_complete"],[1,1107,61,49,"bind"],[1,1112,61,54,"this"],[1,1119,63,6,"this"],[1,1124,63,11,"_inflate"],[1,1133,63,20,"pipe"],[1,1138,63,25,"this"],[1,1143,63,30,"_filter"],[1,1156,64,11],[1,1157,65,6],[1,1161,72,10,"imageSize"],[1,1164,71,8],[1,1167,66,10,"this"],[1,1172,66,15,"_bitmapInfo"],[1,1184,66,27,"width"],[1,1190,67,10,"this"],[1,1195,67,15,"_bitmapInfo"],[1,1207,67,27,"bpp"],[1,1211,68,10,"this"],[1,1216,68,15,"_bitmapInfo"],[1,1228,68,27,"depth"],[1,1234,69,10],[1,1237,70,10],[1,1241,72,32,"this"],[1,1246,72,37,"_bitmapInfo"],[1,1258,72,49,"height"],[1,1265,73,10,"chunkSize"],[1,1267,73,22,"Math"],[1,1272,73,27,"max"],[1,1276,73,31,"imageSize"],[1,1278,73,42,"zlib"],[1,1280,73,47,"Z_MIN_CHUNK"],[1,1293,75,6,"this"],[1,1298,75,11,"_inflate"],[1,1307,75,22,"zlib"],[1,1309,75,27,"createInflate"],[1,1323,75,41],[1,1324,75,43,"chunkSize"],[1,1334,75,54,"chunkSize"],[1,1338,76,6],[1,1342,76,10,"leftToInflate"],[1,1344,76,26,"imageSize"],[1,1346,78,10,"emitError"],[1,1348,78,22,"this"],[1,1353,78,27,"emit"],[1,1358,78,32,"bind"],[1,1363,78,37,"this"],[1,1368,78,43],[1,1377,79,6,"this"],[1,1382,79,11,"_inflate"],[1,1391,79,20,"on"],[1,1394,79,23],[1,1402,79,32],[1,1411,79,42,"err"],[1,1414,80,13,"leftToInflate"],[1,1417,84,8,"emitError"],[1,1419,84,18,"err"],[1,1421,85,6],[1,1424,86,6,"this"],[1,1429,86,11,"_filter"],[1,1437,86,19,"on"],[1,1440,86,22],[1,1451,86,34,"this"],[1,1456,86,39,"_complete"],[1,1466,86,49,"bind"],[1,1471,86,54,"this"],[1,1478,88,6],[1,1482,88,10,"filterWrite"],[1,1484,88,24,"this"],[1,1489,88,29,"_filter"],[1,1497,88,37,"write"],[1,1503,88,43,"bind"],[1,1508,88,48,"this"],[1,1513,88,53,"_filter"],[1,1522,89,6,"this"],[1,1527,89,11,"_inflate"],[1,1536,89,20,"on"],[1,1539,89,23],[1,1546,89,31],[1,1555,89,41,"chunk"],[1,1558,90,13,"leftToInflate"],[1,1562,94,12,"chunk"],[1,1564,94,18,"length"],[1,1571,94,27,"leftToInflate"],[1,1575,95,10,"chunk"],[1,1577,95,18,"chunk"],[1,1579,95,24,"slice"],[1,1585,95,30],[1,1587,95,33,"leftToInflate"],[1,1591,98,8,"leftToInflate"],[1,1594,98,25,"chunk"],[1,1596,98,31,"length"],[1,1603,100,8,"filterWrite"],[1,1605,100,20,"chunk"],[1,1608,101,6],[1,1611,103,6,"this"],[1,1616,103,11,"_inflate"],[1,1625,103,20,"on"],[1,1628,103,23],[1,1634,103,30,"this"],[1,1639,103,35,"_filter"],[1,1647,103,43,"end"],[1,1651,103,47,"bind"],[1,1656,103,52,"this"],[1,1661,103,57,"_filter"],[1,1670,104,4],[1,1671,106,2,"this"],[1,1676,106,7,"_inflate"],[1,1685,106,16,"write"],[1,1691,106,22,"data"],[1,1693,107,0],[1,1695,109,0,"ParserAsync"],[1,1697,109,12,"prototype"],[1,1707,109,22,"_handleMetaData"],[1,1723,109,40],[1,1732,109,50,"metaData"],[1,1735,110,2,"this"],[1,1740,110,7,"_metaData"],[1,1750,110,19,"metaData"],[1,1752,111,2,"this"],[1,1757,111,7,"_bitmapInfo"],[1,1769,111,21,"Object"],[1,1776,111,28,"create"],[1,1783,111,35,"metaData"],[1,1786,113,2,"this"],[1,1791,113,7,"_filter"],[1,1799,113,17],[1,1803,113,21,"FilterAsync"],[1,1805,113,33,"this"],[1,1810,113,38,"_bitmapInfo"],[1,1822,114,0],[1,1824,116,0,"ParserAsync"],[1,1826,116,12,"prototype"],[1,1836,116,22,"_handleTransColor"],[1,1854,116,42],[1,1863,116,52,"transColor"],[1,1866,117,2,"this"],[1,1871,117,7,"_bitmapInfo"],[1,1883,117,19,"transColor"],[1,1894,117,32,"transColor"],[1,1895,118,0],[1,1897,120,0,"ParserAsync"],[1,1899,120,12,"prototype"],[1,1909,120,22,"_handlePalette"],[1,1924,120,39],[1,1933,120,49,"palette"],[1,1936,121,2,"this"],[1,1941,121,7,"_bitmapInfo"],[1,1953,121,19,"palette"],[1,1961,121,29,"palette"],[1,1962,122,0],[1,1964,124,0,"ParserAsync"],[1,1966,124,12,"prototype"],[1,1976,124,22,"_simpleTransparency"],[1,1996,124,44],[1,2007,125,2,"this"],[1,2012,125,7,"_metaData"],[1,2022,125,17,"alpha"],[1,2029,125,25],[1,2030,126,0],[1,2032,128,0,"ParserAsync"],[1,2034,128,12,"prototype"],[1,2044,128,22,"_headersFinished"],[1,2061,128,41],[1,2072,131,2,"this"],[1,2077,131,7,"emit"],[1,2082,131,12],[1,2093,131,24,"this"],[1,2098,131,29,"_metaData"],[1,2108,132,0],[1,2110,134,0,"ParserAsync"],[1,2112,134,12,"prototype"],[1,2122,134,22,"_finished"],[1,2132,134,34],[1,2143,135,6,"this"],[1,2148,135,11,"errord"],[1,2157,139,7,"this"],[1,2162,139,12,"_inflate"],[1,2171,143,4,"this"],[1,2176,143,9,"_inflate"],[1,2185,143,18,"end"],[1,2191,140,4,"this"],[1,2196,140,9,"emit"],[1,2201,140,14],[1,2209,140,23],[1,2229,145,0],[1,2231,147,0,"ParserAsync"],[1,2233,147,12,"prototype"],[1,2243,147,22,"_complete"],[1,2253,147,34],[1,2262,147,44,"filteredData"],[1,2265,148,2],[1,2268,148,6,"this"],[1,2273,148,11,"errord"],[1,2280,149,4],[1,2287,152,2],[1,2291,152,6,"normalisedBitmapData"],[1,2293,154,2],[1,2297,155,4],[1,2301,155,8,"bitmapData"],[1,2303,155,21,"bitmapper"],[1,2305,155,31,"dataToBitMap"],[1,2318,155,44,"filteredData"],[1,2320,155,58,"this"],[1,2325,155,63,"_bitmapInfo"],[1,2338,157,4,"normalisedBitmapData"],[1,2340,157,27,"formatNormaliser"],[1,2342,157,44,"bitmapData"],[1,2344,157,56,"this"],[1,2349,157,61,"_bitmapInfo"],[1,2362,158,4,"bitmapData"],[1,2364,158,17],[1,2368,159,2],[1,2369,159,4],[1,2375,159,11,"ex"],[1,2378,161,4],[1,2390,160,4,"this"],[1,2395,160,9,"_handleError"],[1,2408,160,22,"ex"],[1,2410,162,2],[1,2411,164,2,"this"],[1,2416,164,7,"emit"],[1,2421,164,12],[1,2430,164,22,"normalisedBitmapData"],[1,2432,165,0],[1,2433,165,2],[1,2436]],"functionMap":{"names":["<global>","module.exports","ParserAsync.prototype._handleError","_filter.on$argument_1","ParserAsync.prototype._inflateData","_inflate.on$argument_1","ParserAsync.prototype._handleMetaData","ParserAsync.prototype._handleTransColor","ParserAsync.prototype._handlePalette","ParserAsync.prototype._simpleTransparency","ParserAsync.prototype._headersFinished","ParserAsync.prototype._finished","ParserAsync.prototype._complete"],"mappings":"AAA;oCCU;CDmB;qCEG;6BCgB,cD;CFI;qCIE;gCCwB;ODM;+BCI;ODY;CJM;wCME;CNK;0COE;CPE;uCQE;CRE;4CSE;CTE;yCUE;CVI;kCWE;CXW;kCYE;CZkB"}},"type":"js/module"}]}